# overviewer data for players (odp)

Writes player data to a json file every 60 seconds so you can see realtime positions on [overviewer](https://overviewer.org/).

## Installation

Requirements

1. **Expects your user to be called `minecraft`**
2. **Expects your overviewer html to be in `/opt/msm/html`**

### Quick Install

```bash
curl -sSL https://github.com/aphexddb/overviewer-player-data/blob/master/install.sh | bash
```

### Manual Install

1. Install the app on your minecraft server. This example assumed Ubuntu.

   ```bash
   sudo add-apt-repository ppa:longsleep/golang-backports
   sudo apt update
   sudo apt install -y golang-go git

   cd /usr/local/src
   sudo git clone https://github.com/aphexddb/overviewer-player-data.git
   cd overviewer-player-data
   sudo make
   sudo ln -s /usr/local/src/overviewer-player-data/odp /usr/local/bin/odp
   ```

2. Setup the app in the overview html folder

   _Assuming your overviewer html directory is `/opt/msm/html`_

   ```bash
   cp /usr/local/src/overviewer-player-data/players.js /opt/msm/html/players.js
   ```

3. Append a line to the end of the index.html file generated by overviewer

   ```bash
   sed -i 's|</head>|<script type="text/javascript" src="players.js"></script></head>|' /opt/msm/html/index.html
   ```

4. Install **odp** as a service and run at startup

   **edit the host and secret** in `odp.sh` to match your rcon server

   ```bash
   sudo chmod +x /usr/local/src/overviewer-player-data/odp.sh
   ```

   Setup odp as a service

   ```bash

   sudo cp /usr/local/src/overviewer-player-data/odp.service /etc/systemd/system/odp.service
   sudo chmod 644 /etc/systemd/system/odp.service

   sudo systemctl daemon-reload
   sudo systemctl enable odp.service

   sudo systemctl start odp

   sudo systemctl status odp
   ```
